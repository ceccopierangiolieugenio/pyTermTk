name: _Scratchpad

on:
  workflow_dispatch:
  # push:
  #   branches:
  #     - main

permissions:
  contents: write
  pull-requests: write
  actions: read
  pages: write
  id-token: write

jobs:
  notify:
    name: Notify ${{ matrix.name }} to the socials
    runs-on: self-hosted
    strategy:
      matrix:
        name: [pyTermTk]
        release-notes: ["#Test1 Notification\n\n##Test2\n\n###Test3\n\nContent!!!"]
        version: ["0.46.0-a.0"]
    steps:
      - uses: actions/checkout@v4
        with:
          ref: ${{ github.sha }}
      - name: Set up Python 3.11
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      - name: Install dependencies
        shell: bash
        run:
          pip install -e 'tools/ci[social]'
      - name: Notify ${{ matrix.name }} on Discord
        env:
          RN: ${{ matrix.release-notes }}
          MESSAGE: ${{ matrix.release-notes }}
          GITHUB_TOKEN: ${{ secrets.GH_PAT_TOKEN }}
          DISCORD_TOKEN: ${{ secrets.DISCORD_TOKEN }}
          GH_DISCUSSION_TOKEN: ${{ secrets.GH_DISCUSSION_TOKEN }}
        run: |
          # notify-discord ${{ matrix.name }} v${{ matrix.version }}
          # notify-gh-discussion ${{ matrix.name }} v${{ matrix.version }}
      - name: Notify ${{ matrix.name }} on Bluesky
        env:
          BLUESKY_APP_PWD: ${{ secrets.BLUESKY_APP_PWD }}
          BLUESKY_APP_IDENTIFIER: ${{ secrets.BLUESKY_APP_IDENTIFIER }}
        run: |
          notify-bluesky ${{ matrix.name }} ${{ matrix.version }}